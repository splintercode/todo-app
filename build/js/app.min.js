"use strict";!function(){var t=angular.module("app",["ngRoute","firebase","app.controllers"]);t.config(["$routeProvider",function(t){t.when("/",{templateUrl:"home.html"}),t.when("/about",{templateUrl:"about.html"}),t.otherwise({redirectTo:"/"})}]),t.run(["$rootScope","$location","authService",function(t,o,e){t.$on("$routeChangeStart",function(t){e.isLoggedIn()?(console.log("ALLOW"),o.path("/home")):(console.log("DENY"),t.preventDefault(),o.path("/login"))})}])}(),function(){function t(t){function o(){return r.$authWithOAuthPopup("twitter").then(function(t){var o=i.child("/users/"+t.uid);return o.set(t),u=t})["catch"](function(t){console.log("Authentication failed:",t)})}function e(){i.unauth(),u=null}function n(){return null!==u&&null!==u.uid?!0:!1}var i=new Firebase("https://todo-app-core.firebaseio.com"),r=t(i),u=i.getAuth(),l={loginTwitter:o,logout:e,isLoggedIn:n};return l}angular.module("app").factory("authService",t),t.$inject=["$firebaseAuth"]}(),function(){var t=angular.module("app.controllers",[]);t.controller("BaseCtrl",["$firebaseAuth","authService",function(t,o){function e(){o.loginTwitter().then(function(t){i(t)})["catch"](function(t){console.log("Authentication failed:",t)})}function n(){o.logout(),l.provider="Not logged in."}function i(t){null!==t&&null!==t.uid&&(l.provider="Logged in with "+t.provider,console.log("Authenticated successfully with payload:",t),console.log("User "+t.uid+" is logged in with "+t.provider))}var r=new Firebase("https://todo-app-core.firebaseio.com"),u=(t(r),r.getAuth()),l=this;l.provider="Not logged in.",l.loginTwitter=e,l.logout=n,i(u)}])}();